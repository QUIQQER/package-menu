{strip}
{assign var=children value=$Site->getNavigation()}

{if !isset($level)}
{assign var=level value=1}
{else}
{assign var=level value=$level+1}
{/if}


{if count( $children )}
<ul class="fa-ul quiqqer-navigation-level-{$level}">
    {if $level == 1 && $this->getAttribute('showBrickTitle') != ""}
    <h2 class="quiqqer-navigation-title-style">{$this->getAttribute('showBrickTitle')}</h2>
    {/if}
    {if $homeLink && $level == 1}
    <li class="quiqqer-navigation-li">
        <div class="quiqqer-navigation-entry">
            {if $homeIcon}
            <i class="fa quiqqer-fa-list-icon fa-fw {$homeIcon}"></i>
            {/if}
            <a href="{url site=$Site}" class="quiqqer-navigation-home quiqqer-navigation-link">
                {$Site->getAttribute('title')}
                {$this->getAttribute('homelink')}
            </a>
        </div>
    </li>
    {/if}
    {foreach from=$children item=Child}
    <li class="quiqqer-navigation-li {if $Rewrite->isIdInPath($Child->getId())} active-bgcolor {/if}">
        {assign var=subnavigation value=$Child->getNavigation()}
        <div class="quiqqer-navigation-entry
            {if
                $Rewrite->isIdInPath($Child->getId()) &&
                $activeId != $Child->getId() &&
                $level == 1
            } quiqqer-first-li-bg{/if}

            {if $activeId == $Child->getId()} quiqqer-navigation-active{/if}">

            {if $listIcon}
            <i class="fa quiqqer-fa-list-icon fa-fw {$listIcon}"></i>
            {/if}
            <a href="{url site=$Child}" class="quiqqer-navigation-link
            {if !count ( $subnavigation )} quiqqer-navigation-link-no-icon{/if}"
               {if !$listIcon}style="margin-left: 30px;"{/if}
            >
            {$Child->getAttribute('title')}
            </a>
            {if count ( $subnavigation )}
            <i class="fa quiqqer-fa-levels-icon {$levelIcon} {if $Rewrite->isIdInPath($Child->getId())} fa-nav-levels-rotate {/if} "></i>
            {/if}
        </div>

        {if $levels === false || $levels-1 >= $level}
        <div class="quiqqer-sub-nav-div {if !$Rewrite->isIdInPath($Child->getId())}quiqqer-navigation-close{/if}">

            {include file=$navTemplate
            Site=$Child
            level=$level
            levels=$levels
            }

        </div>
        {/if}
    </li>
    {/foreach}
</ul>
{/if}
{/strip}
